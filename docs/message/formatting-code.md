# 快速格式化代码

<span class="feature-tag" title="最早可用版本" markdown>
    <span class="icon">:material-tag:</span>
    <span class="text">1.2.5</span>
</span>

快速格式化代码是一种用于在编辑器中快速编辑格式的代码，通过在编辑器中输入特定符号以将文本段落转换成含有特定样式的消息格式。

## 使用方法

快速格式化代码只能在纯文本编辑器中使用，需要在编辑器中勾选 “使用快速格式化代码”。勾选后，编辑器将会出现格式化控制器，点击控制器上的按钮即可在光标处自动插入代码，或是在选中文本的两侧插入代码。您也可以自己输入代码。

在文本中插入 `@` + 某个字符，即可为后面的文本赋予特定样式。可用的代码如下：

| 代码 | 描述 |
| - | - |
| `@b` | 粗体。 |
| `@i` | 斜体。 |
| `@u` | 下划线。 |
| `@s` | 删除线。 |
| `@+` | 增大字号。 |
| `@-` | 减小字号。 |
| `@r` | 清除格式。 |

除了上述样式外，还可以设置文本颜色，格式为：`@[十六进制颜色码]`，支持 Alpha 通道，例如：`@[#66ccff]`、`@[#66ccffaa]`。

需要注意的是，格式代码会持续影响后方所有文本的样式，直到遇到 `@r`。

`@+`（增大字号）和 `@-`（减小字号）可以累加，但不会超过最大和最小值。

如果没有正确输入代码，`@` 及其后面的字符会原样输出。

如果不希望文本中的 `@` 符号被转换，请取消勾选 “使用快速格式化代码” 或将 `@` 改为 `\@`。

另外，还可以使用快速格式化代码插入表情或图片，格式为 `@{ID}`，其中 `ID` 是表情的 ID，您可以通过编辑器中的表情悬浮窗快捷插入。

## 使用示例

=== "输入内容"

    ```
    这里没有格式。@b这里有粗体。@i这里有粗体和斜体。@r这里没有格式。@[#66ccff]这里是蓝色。
    这里是中等字号。@+大一点。@+再大一点。@-小一点。
    ```

=== "效果预览"

    这里没有格式。**这里有粗体。*这里有粗体和斜体。***这里没有格式。<span style="color: #66CCFF;">这里是蓝色。</span><br>
    这里是中等字号。<span style="font-size: 1.5rem;">大一点。</span><span style="font-size: 2rem;">再大一点。</span><span style="font-size: 1.5rem;">小一点。</span>


## 技术信息

格式化代码解析过程存在文本替换操作，这会产生以下字符串作为中间产物：

- `{{{sheep-realms:split}}}` 用于分割文本段落。
- `{{{sheep-realms:format}}}` 用于分割代码和文本。
- `{{{sheep-realms:at}}}` 用于替换不希望被替换的 `@` 字符。

因此请不要在文本中插入以上字符串，这会造成意料之外的结果。

<p style="color: var(--md-default-fg-color--light);">虽然一般情况下根本不可能恰巧有人写出上面的东西，如果你做到了，我可以认为你在找茬。</p>